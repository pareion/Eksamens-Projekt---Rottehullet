CREATE TABLE UdstyrTabelTemporary (
	memberid    INT NULL,
    udstyrid    INT NULL
);

CREATE TYPE listen AS TABLE (
    [tal] INT NULL
);

CREATE PROCEDURE deleteUdstyr
	@list listen READONLY,
	@memberid int

AS
DECLARE a CURSOR FAST_FORWARD FOR
	SELECT tal FROM @list
	
	DECLARE @listid int

	FETCH NEXT FROM @list INTO @listid
	WHILE(@@FETCH_STATUS = 0)
	BEGIN
		IF EXISTS(SELECT * FROM Udstyr WHERE udstyrid != @listid)
		BEGIN
			INSERT INTO UdstyrTabelTemporary VALUES (@memberid,@listid)
		END
		FETCH NEXT FROM @list INTO @listid
	END
	
	SELECT * FROM UdstyrTabelTemporary WHERE memberid = @memberid
RETURN